
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="나스닥 100 종목 PEG 비율 분석 대시보드">
    <title>NASDAQ 100 PEG Analysis Dashboard</title>
    
    <!-- PWA 메타태그 -->
    <meta name="theme-color" content="#007aff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="나스닥 100 PEG">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="나스닥 100 PEG 분석">
    <meta name="msapplication-TileColor" content="#007aff">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- PWA 매니페스트 및 아이콘 -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="bull_logo.png">
    <link rel="apple-touch-icon" href="bull_logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="bull_logo.png">
    <link rel="apple-touch-startup-image" href="bull_logo.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- iOS PWA 전체화면 지원 -->
    <meta name="apple-mobile-web-app-title" content="나스닥 PEG 분석">
    <meta name="format-detection" content="telephone=no">
    

    <style>
        /* =============================================
           CSS 변수 정의 (디자인 시스템)
        ============================================= */
        :root {
            /* 컬러 팔레트 */
            --primary-blue: #007aff;
            --secondary-purple: #5856d6;
            --success-green: #34c759;
            --warning-orange: #ff9500;
            --error-red: #ff3b30;
            
            --text-primary: #1d1d1f;
            --text-secondary: #6e6e73;
            --text-tertiary: #86868b;
            --text-white: #ffffff;
            
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f7;
            --bg-tertiary: #f8f9fa;
            --bg-quaternary: #f2f2f7;
            
            --border-light: #e5e5e7;
            --border-medium: #d1d1d6;
            --border-dark: #aeaeb2;
            
            /* 간격 */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;
            --spacing-xl: 20px;
            --spacing-2xl: 24px;
            --spacing-3xl: 32px;
            --spacing-4xl: 40px;
            --spacing-5xl: 48px;
            
            /* 폰트 크기 */
            --font-xs: 12px;
            --font-sm: 14px;
            --font-md: 15px;
            --font-lg: 19px;
            --font-xl: 22px;
            --font-2xl: 32px;
            --font-3xl: 48px;
            
            /* 기타 */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 18px;
            --radius-xl: 20px;
            --shadow-sm: 0 1px 4px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
            --shadow-lg: 0 4px 24px rgba(0,0,0,0.06);
            --transition: all 0.2s ease;
            
            /* 테이블 컬럼 너비 */
            --col-company: 180px;
            --col-ticker: 80px;
            --col-industry: 120px;
            --col-peg: 90px;
            --col-pe: 90px;
            --col-price: 100px;
        }

        /* =============================================
           기본 설정
        ============================================= */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.47059;
            font-weight: 400;
            font-size: var(--font-md);
        }

        /* =============================================
           레이아웃 컴포넌트
        ============================================= */
        .app-container {
            max-width: 1200px;
            margin: var(--spacing-4xl) auto;
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        /* =============================================
           헤더 섹션
        ============================================= */
        .app-header {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-purple) 100%);
            padding: var(--spacing-5xl) var(--spacing-4xl) var(--spacing-3xl);
            text-align: center;
            border-bottom: 1px solid var(--border-light);
        }
        
        .header-title-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }
        
        .header-logo {
            width: 65px;
            height: 65px;
            object-fit: contain;
            filter: drop-shadow(3px 3px rgba(0, 0, 0, 0.3));
        }
        
        .header-title {
            font-size: var(--font-3xl);
            font-weight: 700;
            color: var(--text-white);
            margin: 0;
            letter-spacing: -0.02em;
        }
        
        .header-subtitle {
            font-size: var(--font-lg);
            color: rgba(255, 255, 255, 0.9);
            font-weight: 400;
            margin-bottom: var(--spacing-2xl);
            letter-spacing: 0.011em;
        }
        
        .update-status {
            display: inline-flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-xl);
            padding: var(--spacing-sm) var(--spacing-lg);
            font-size: var(--font-sm);
            color: rgba(255, 255, 255, 0.95);
            font-weight: 500;
        }
        
        .status-badge {
            background: var(--success-green);
            color: var(--text-white);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-md);
            font-size: var(--font-xs);
            font-weight: 600;
            margin-right: var(--spacing-sm);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* =============================================
           범례 섹션
        ============================================= */
        .legend-section {
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-quaternary) 100%);
            padding: var(--spacing-3xl) var(--spacing-4xl);
            border-bottom: 1px solid var(--border-light);
        }
        
        .legend-title {
            font-size: var(--font-xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xl);
            letter-spacing: -0.01em;
        }
        
        .legend-items {
            display: flex;
            gap: var(--spacing-3xl);
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            background: var(--bg-primary);
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
        }
        
        .legend-indicator {
            width: 16px;
            height: 16px;
            border-radius: var(--spacing-sm);
        }
        
        .legend-text {
            font-size: var(--font-md);
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .disclaimer {
            margin-top: var(--spacing-xl);
            text-align: center;
            font-size: var(--font-sm);
            color: var(--text-tertiary);
            font-weight: 400;
            line-height: 1.5;
        }

        /* =============================================
           테이블 섹션
        ============================================= */
        .table-section {
            background: var(--bg-primary);
            overflow: hidden;
        }
        
        .table-container {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .table-wrapper {
            height: 70vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .stock-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background: var(--bg-primary);
            table-layout: fixed;
            min-width: 1000px;
        }
        
        /* 테이블 헤더 */
        .table-header {
            position: sticky;
            top: 0;
            z-index: 10;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-light);
        }
        
        .table-header th {
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, var(--bg-quaternary) 0%, var(--border-light) 100%);
            color: var(--text-primary);
            padding: var(--spacing-lg) var(--spacing-xl);
            text-align: left;
            font-weight: 600;
            font-size: var(--font-sm);
            cursor: pointer;
            transition: var(--transition);
            user-select: none;
            border: none;
            position: relative;
            letter-spacing: 0.01em;
            border-bottom: 1px solid var(--border-medium);
            z-index: 30;
        }
        
        .table-header th:hover {
            background: linear-gradient(135deg, var(--border-light) 0%, var(--border-medium) 100%);
        }
        
        .table-header th::after {
            content: '⇅';
            position: absolute;
            right: var(--spacing-md);
            font-size: var(--font-xs);
            color: var(--text-tertiary);
            transition: color 0.2s ease;
        }
        
        .table-header th.sort-asc::after {
            content: '▲';
            color: var(--primary-blue);
        }
        
        .table-header th.sort-desc::after {
            content: '▼';
            color: var(--primary-blue);
        }

        /* 컬럼 너비 정의 */
        .col-company { width: var(--col-company); }
        .col-ticker { width: var(--col-ticker); }
        .col-industry { width: var(--col-industry); }
        .col-peg { width: var(--col-peg); }
        .col-pe { width: var(--col-pe); }
        .col-price { width: var(--col-price); }
        
        /* 테이블 데이터 */
        .stock-table td {
            padding: var(--spacing-lg) var(--spacing-xl);
            border-bottom: 1px solid #f6f6f6;
            font-size: var(--font-md);
            font-weight: 400;
            background: var(--bg-primary);
            transition: background-color 0.15s ease;
        }
        
        .stock-table tbody tr:hover td {
            background: #f9f9f9;
        }

        /* 셀 타입별 스타일 */
        .cell-company {
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .cell-ticker {
            font-weight: 700;
            color: var(--primary-blue);
            text-align: center;
            font-size: var(--font-sm);
            letter-spacing: 0.5px;
        }
        
        .cell-industry {
            font-size: var(--font-sm);
            color: var(--text-secondary);
            font-weight: 400;
            /* 긴 텍스트 줄임 처리 */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .cell-price {
            font-weight: 600;
            color: var(--text-primary);
            text-align: right;
            font-variant-numeric: tabular-nums;
        }
        
        .cell-pe {
            text-align: right;
            font-variant-numeric: tabular-nums;
            font-weight: 500;
            color: var(--text-secondary);
        }
        
        .cell-peg {
            text-align: right;
            font-weight: 600;
            border-radius: var(--radius-sm);
            padding: 6px 10px;
            font-variant-numeric: tabular-nums;
        }

        /* PEG 등급별 색상 */
        .peg-excellent {
            background: rgba(52, 199, 89, 0.1);
            color: #30a46c;
        }
        
        .peg-good {
            background: rgba(255, 149, 0, 0.1);
            color: #f56500;
        }
        
        .peg-poor {
            background: rgba(255, 59, 48, 0.1);
            color: #d70015;
        }
        
        .peg-na {
            background: #f6f6f6;
            color: var(--text-tertiary);
        }

        /* 범례 색상 정의 */
        .legend-indicator.peg-excellent { background: rgba(52, 199, 89, 0.8); }
        .legend-indicator.peg-good { background: rgba(255, 149, 0, 0.8); }
        .legend-indicator.peg-poor { background: rgba(255, 59, 48, 0.8); }

        /* =============================================
           스크롤바 커스터마이징
        ============================================= */
        .table-wrapper::-webkit-scrollbar,
        .table-container::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        .table-wrapper::-webkit-scrollbar-track,
        .table-container::-webkit-scrollbar-track {
            background: #f6f6f6;
        }
        
        .table-wrapper::-webkit-scrollbar-thumb,
        .table-container::-webkit-scrollbar-thumb {
            background: var(--border-medium);
            border-radius: 4px;
        }
        
        .table-wrapper::-webkit-scrollbar-thumb:hover,
        .table-container::-webkit-scrollbar-thumb:hover {
            background: var(--border-dark);
        }

        /* =============================================
           플로팅 버튼
        ============================================= */
        .floating-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-purple) 100%);
            color: var(--text-white);
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius-sm);
            text-decoration: none;
            font-weight: 600;
            font-size: var(--font-sm);
            box-shadow: 0 4px 20px rgba(0, 122, 255, 0.3);
            transition: var(--transition);
            z-index: 1000;
            border: none;
            cursor: pointer;
            letter-spacing: 0.5px;
        }
        
        .floating-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 122, 255, 0.4);
            background: linear-gradient(135deg, #0051d5 0%, #4c44b8 100%);
            color: var(--text-white);
            text-decoration: none;
        }
        
        .floating-btn:active {
            transform: translateY(0px);
        }

        /* =============================================
           푸터
        ============================================= */
        .app-footer {
            text-align: center;
            padding: var(--spacing-2xl);
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-quaternary) 100%);
            border-top: 1px solid var(--border-light);
            font-size: var(--font-sm);
            color: var(--text-tertiary);
        }

        /* =============================================
           반응형 디자인
        ============================================= */
        @media (max-width: 768px) {
            :root {
                /* 모바일용 컬럼 너비 재정의 */
                --col-company: 140px;
                --col-ticker: 60px;
                --col-industry: 100px;
                --col-peg: 70px;
                --col-pe: 70px;
                --col-price: 80px;
            }
            
            .app-container {
                margin: var(--spacing-xl) var(--spacing-lg);
                border-radius: var(--radius-md);
            }
            
            .app-header {
                padding: var(--spacing-3xl) var(--spacing-2xl) var(--spacing-2xl);
            }
            
            .header-title-wrapper {
                gap: 10px;
            }
            
            .header-logo {
                width: 35px;
                height: 35px;
            }
            
            .header-title {
                font-size: var(--font-2xl);
            }
            
            .header-subtitle {
                font-size: 17px;
            }
            
            .legend-section {
                padding: var(--spacing-2xl);
            }
            
            .legend-items {
                flex-direction: column;
                gap: var(--spacing-md);
            }
            
            .table-wrapper {
                height: 60vh;
            }
            
            .stock-table th, 
            .stock-table td {
                padding: var(--spacing-md) var(--spacing-lg);
                font-size: var(--font-sm);
                white-space: nowrap;
            }
            
            .stock-table {
                min-width: 900px;
                width: 900px;
            }
            
            .floating-btn {
                bottom: var(--spacing-xl);
                right: var(--spacing-xl);
                padding: 10px var(--spacing-lg);
                font-size: 13px;
            }
            
            .scroll-notice {
                text-align: center;
                padding: var(--spacing-md);
                font-size: 0.85em;
                color: var(--primary-blue);
                background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
                border: 1px solid rgba(0, 122, 255, 0.2);
                border-radius: var(--radius-sm);
                margin: var(--spacing-sm) var(--spacing-lg);
                font-weight: 500;
                box-shadow: 0 2px 8px rgba(0, 122, 255, 0.1);
            }
        }

        /* =============================================
           접근성 개선
        ============================================= */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* 고대비 모드 지원 */
        @media (prefers-contrast: high) {
            :root {
                --text-primary: #000000;
                --text-secondary: #333333;
                --border-light: #000000;
            }
        }
    </style>
</head>
<body>
    <main class="app-container" role="main">
        <!-- 헤더 섹션 -->
        <header class="app-header">
            <div class="header-title-wrapper">
                <img src="logo2.png" alt="나스닥 분석 로고" class="header-logo">
                <h1 class="header-title">나스닥 100 종목 분석 (PEG) V1.0</h1>
            </div>
            <p class="header-subtitle">PEG Ratio Analysis Dashboard</p>
            <div class="update-status" role="status" aria-live="polite">
                <span class="status-badge">Live</span>
                <span>Updated: 2025.07.22 최신 크롤링 • Manual Update</span>
            </div>
        </header>
        
        <!-- 범례 섹션 -->
        <section class="legend-section" aria-labelledby="legend-title">
            <h2 id="legend-title" class="legend-title">PEG Ratio Guide</h2>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-indicator peg-excellent" aria-hidden="true"></div>
                    <span class="legend-text"><strong>&lt; 1.0</strong> 성장성 높음</span>
                </div>
                <div class="legend-item">
                    <div class="legend-indicator peg-good" aria-hidden="true"></div>
                    <span class="legend-text"><strong>1.0 - 2.0</strong> 보통 수준</span>
                </div>
                <div class="legend-item">
                    <div class="legend-indicator peg-poor" aria-hidden="true"></div>
                    <span class="legend-text"><strong>&gt; 2.0</strong> 성장성 낮음</span>
                </div>
            </div>
            <div class="disclaimer">
                이 데이터는 수집방법에 따라 결과가 다를 수 있습니다. 투자 시 증권앱의 구체적 데이터를 확인하세요<br>
                종목에 대한 추가 정보가 필요하시다면, <strong>'종목분석기'</strong> 버튼을 클릭하세요.
            </div>
        </section>
        
        <!-- 테이블 섹션 -->
        <section class="table-section" aria-labelledby="table-title">
            <h2 id="table-title" class="sr-only">나스닥 100 종목 데이터 테이블</h2>
            <div class="table-container">
                <div class="table-wrapper">
                    <table class="stock-table" 
                           role="table" 
                           aria-label="나스닥 100 종목 PEG 분석 데이터"
                           id="stockTable">
                        <thead class="table-header">
                            <tr role="row">
                                <th role="columnheader" 
                                    class="col-company" 
                                    tabindex="0"
                                    aria-sort="none"
                                    onclick="TableManager.sortTable(0)"
                                    onkeydown="TableManager.handleKeyPress(event, 0)">
                                    Company
                                </th>
                                <th role="columnheader" 
                                    class="col-ticker" 
                                    tabindex="0"
                                    aria-sort="none"
                                    onclick="TableManager.sortTable(1)"
                                    onkeydown="TableManager.handleKeyPress(event, 1)">
                                    Ticker
                                </th>
                                <th role="columnheader" 
                                    class="col-industry" 
                                    tabindex="0"
                                    aria-sort="none"
                                    onclick="TableManager.sortTable(2)"
                                    onkeydown="TableManager.handleKeyPress(event, 2)">
                                    Industry
                                </th>
                                <th role="columnheader" 
                                    class="col-peg" 
                                    tabindex="0"
                                    aria-sort="none"
                                    onclick="TableManager.sortTable(3)"
                                    onkeydown="TableManager.handleKeyPress(event, 3)">
                                    PEG
                                </th>
                                <th role="columnheader" 
                                    class="col-pe" 
                                    tabindex="0"
                                    aria-sort="none"
                                    onclick="TableManager.sortTable(4)"
                                    onkeydown="TableManager.handleKeyPress(event, 4)">
                                    Trail P/E
                                </th>
                                <th role="columnheader" 
                                    class="col-pe" 
                                    tabindex="0"
                                    aria-sort="none"
                                    onclick="TableManager.sortTable(5)"
                                    onkeydown="TableManager.handleKeyPress(event, 5)">
                                    Fwd P/E
                                </th>
                                <th role="columnheader" 
                                    class="col-price" 
                                    tabindex="0"
                                    aria-sort="none"
                                    onclick="TableManager.sortTable(6)"
                                    onkeydown="TableManager.handleKeyPress(event, 6)">
                                    Price
                                </th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- 데이터는 JavaScript로 동적 생성 -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="scroll-notice">
                👈👉 테이블을 좌우로 스크롤하여 모든 데이터를 확인하세요
            </div>
        </section>
        
        <!-- 푸터 -->
        <footer class="app-footer">
            <p>Data updated: 2025.07.22 최신 크롤링 • Source: Yahoo Finance</p>
        </footer>
    </main>

    <!-- 플로팅 버튼 -->
    <a href="https://chatgpt.com/g/g-6876f318c7a88191ba6b638a5b4be237-migug-sijang-tuja-jongmog-bunseoggi" 
       target="_blank" 
       rel="noopener noreferrer"
       class="floating-btn"
       aria-label="종목분석기로 이동">
        종목분석기
    </a>

    <!-- 스크린 리더 전용 요소 -->
    <style>
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>

    <script>
        // =============================================
        // 주식 데이터 모델 (2025-07-22 최신 업데이트)
        // =============================================
        const STOCK_DATA = [
            {company: "Apple Inc.", ticker: "AAPL", industry: "Consumer Electronics", peg: 1.969, trailPE: 33.096573, fwdPE: 25.569193, price: 212.48},
            {company: "Airbnb, Inc.", ticker: "ABNB", industry: "Travel Services", peg: 1.988, trailPE: 35.043148, fwdPE: 30.682224, price: 138.07},
            {company: "Adobe Inc.", ticker: "ADBE", industry: "Software - Application", peg: 1.1846, trailPE: 23.539053, fwdPE: 17.891972, price: 367.68},
            {company: "Analog Devices, Inc.", ticker: "ADI", industry: "Semiconductors", peg: 1.4147, trailPE: 65.347824, fwdPE: 31.893898, price: 240.48},
            {company: "Automatic Data Processing, Inc.", ticker: "ADP", industry: "Software - Application", peg: 3.1912, trailPE: 30.76687, fwdPE: 27.681692, price: 300.9},
            {company: "Autodesk, Inc.", ticker: "ADSK", industry: "Software - Application", peg: 1.752, trailPE: 63.339058, fwdPE: 32.152504, price: 295.16},
            {company: "Applied Materials, Inc.", ticker: "AMAT", industry: "Semiconductor Equipment & Materials", peg: 1.894, trailPE: 23.403404, fwdPE: 19.877193, price: 192.61},
            {company: "Advanced Micro Devices, Inc.", ticker: "AMD", industry: "Semiconductors", peg: 0.7838, trailPE: 114.59854, fwdPE: 30.784315, price: 157.0},
            {company: "Amgen Inc.", ticker: "AMGN", industry: "Drug Manufacturers - General", peg: 0.9808, trailPE: 26.970829, fwdPE: 14.313981, price: 295.87},
            {company: "Amazon.com, Inc.", ticker: "AMZN", industry: "Internet Retail", peg: 2.9398, trailPE: 37.284554, fwdPE: 37.284554, price: 229.3},
            {company: "ANSYS, Inc.", ticker: "ANSS", industry: "Software - Application", peg: 2.4662, trailPE: 55.534126, fwdPE: 33.996365, price: 374.3},
            {company: "ASML Holding N.V.", ticker: "ASML", industry: "Semiconductor Equipment & Materials", peg: 1.503, trailPE: 25.71204, fwdPE: 26.954306, price: 719.68},
            {company: "Broadcom Inc.", ticker: "AVGO", industry: "Semiconductors", peg: 1.3289, trailPE: 104.803635, fwdPE: 46.711506, price: 288.21},
            {company: "Baidu, Inc.", ticker: "BIDU", industry: "Internet Content & Information", peg: 0.1941524778761061, trailPE: 8.775692, fwdPE: 8.008115, price: 88.81},
            {company: "Biogen Inc.", ticker: "BIIB", industry: "Drug Manufacturers - General", peg: null, trailPE: 12.12253, fwdPE: 7.3637457, price: 122.68},
            {company: "Booking Holdings Inc.", ticker: "BKNG", industry: "Travel Services", peg: 1.6409, trailPE: 35.426834, fwdPE: 27.05337, price: 5677.15},
            {company: "Cadence Design Systems, Inc.", ticker: "CDNS", industry: "Software - Application", peg: 3.3606, trailPE: 80.28426, fwdPE: 46.178104, price: 316.32},
            {company: "Charter Communications, Inc.", ticker: "CHTR", industry: "Telecom Services", peg: 0.4056, trailPE: 10.850726, fwdPE: 10.868922, price: 388.89},
            {company: "Comcast Corporation", ticker: "CMCSA", industry: "Telecom Services", peg: 1.614, trailPE: 8.623153, fwdPE: 7.99315, price: 35.01},
            {company: "Coinbase Global, Inc.", ticker: "COIN", industry: "Financial Data & Stock Exchanges", peg: 124.8936, trailPE: 77.604126, fwdPE: 115.86275, price: 413.63},
            {company: "Costco Wholesale Corporation", ticker: "COST", industry: "Discount Stores", peg: 5.052, trailPE: 53.869244, fwdPE: 48.148373, price: 947.56},
            {company: "Copart, Inc.", ticker: "CPRT", industry: "Specialty Business Services", peg: 2.2747, trailPE: 30.483442, fwdPE: 26.454021, price: 46.03},
            {company: "Salesforce, Inc.", ticker: "CRM", industry: "Software - Application", peg: 1.4017, trailPE: 40.98125, fwdPE: 23.56514, price: 262.28},
            {company: "CrowdStrike Holdings, Inc.", ticker: "CRWD", industry: "Software - Infrastructure", peg: 5.424, trailPE: null, fwdPE: 112.782196, price: 481.58},
            {company: "Cisco Systems, Inc.", ticker: "CSCO", industry: "Communication Equipment", peg: 2.2644, trailPE: 27.893875, fwdPE: 17.523075, price: 68.34},
            {company: "Cintas Corporation", ticker: "CTAS", industry: "Specialty Business Services", peg: 3.926, trailPE: 50.41458, fwdPE: 47.2906, price: 221.32},
            {company: "Datadog, Inc.", ticker: "DDOG", industry: "Software - Application", peg: 2.7446, trailPE: 315.80435, fwdPE: 71.56158, price: 145.27},
            {company: "Dollar Tree, Inc.", ticker: "DLTR", industry: "Discount Stores", peg: 1.3264594610778442, trailPE: 22.151873, fwdPE: 18.533003, price: 112.31},
            {company: "DocuSign, Inc.", ticker: "DOCU", industry: "Software - Application", peg: 0.1340768799999999, trailPE: 15.083649, fwdPE: 21.501354, price: 79.34},
            {company: "Electronic Arts Inc.", ticker: "EA", industry: "Electronic Gaming & Multimedia", peg: 1.3868, trailPE: 36.091766, fwdPE: 17.982416, price: 153.39},
            {company: "eBay Inc.", ticker: "EBAY", industry: "Internet Retail", peg: 1.9797, trailPE: 18.997597, fwdPE: 15.139847, price: 79.03},
            {company: "Exelon Corporation", ticker: "EXC", industry: "Utilities - Regulated Electric", peg: 2.0969, trailPE: 16.256506, fwdPE: 16.627375, price: 43.73},
            {company: "Expeditors International of Washington, Inc.", ticker: "EXPD", industry: "Integrated Freight & Logistics", peg: 4.0312, trailPE: 18.694353, fwdPE: 20.918215, price: 112.54},
            {company: "Fastenal Company", ticker: "FAST", industry: "Industrial Distribution", peg: 4.1189, trailPE: 44.250004, fwdPE: 21.013699, price: 46.02},
            {company: "Fox Corporation", ticker: "FOX", industry: "Entertainment", peg: 5.6574, trailPE: 12.641089, fwdPE: 21.731916, price: 51.07},
            {company: "Fox Corporation", ticker: "FOXA", industry: "Entertainment", peg: 6.1576, trailPE: 13.730199, fwdPE: 14.871314, price: 55.47},
            {company: "Fortinet, Inc.", ticker: "FTNT", industry: "Software - Infrastructure", peg: 2.9435, trailPE: 43.82787, fwdPE: 44.373444, price: 106.94},
            {company: "Gilead Sciences, Inc.", ticker: "GILD", industry: "Drug Manufacturers - General", peg: 0.2251, trailPE: 22.747898, fwdPE: 14.573352, price: 108.28},
            {company: "Alphabet Inc.", ticker: "GOOG", industry: "Internet Content & Information", peg: 1.3907, trailPE: 21.333704, fwdPE: 21.357542, price: 191.15},
            {company: "Alphabet Inc.", ticker: "GOOGL", industry: "Internet Content & Information", peg: 1.3841, trailPE: 21.216518, fwdPE: 21.216518, price: 190.1},
            {company: "Honeywell International Inc.", ticker: "HON", industry: "Conglomerates", peg: 2.3497, trailPE: 27.036783, fwdPE: 21.364214, price: 235.22},
            {company: "Robinhood Markets, Inc.", ticker: "HOOD", industry: "Capital Markets", peg: 0.5641158513640641, trailPE: 59.965515, fwdPE: 142.9315, price: 104.34},
            {company: "IDEXX Laboratories, Inc.", ticker: "IDXX", industry: "Diagnostics & Research", peg: 4.2494, trailPE: 48.184086, fwdPE: 43.551003, price: 520.87},
            {company: "Illumina, Inc.", ticker: "ILMN", industry: "Diagnostics & Research", peg: null, trailPE: null, fwdPE: 21.446833, price: 94.795},
            {company: "Intel Corporation", ticker: "INTC", industry: "Semiconductors", peg: null, trailPE: null, fwdPE: 23.979382, price: 23.26},
            {company: "Intuit Inc.", ticker: "INTU", industry: "Software - Application", peg: 1.9539, trailPE: 62.24042, fwdPE: 34.354027, price: 763.69},
            {company: "Intuitive Surgical, Inc.", ticker: "ISRG", industry: "Medical Instruments & Supplies", peg: 3.6627, trailPE: 75.345985, fwdPE: 65.66412, price: 516.12},
            {company: "JD.com, Inc.", ticker: "JD", industry: "Internet Retail", peg: 0.1396309450171821, trailPE: 8.126521, fwdPE: 8.067634, price: 33.4},
            {company: "Keurig Dr Pepper Inc.", ticker: "KDP", industry: "Beverages - Non-Alcoholic", peg: 1.0301, trailPE: 30.290909, fwdPE: 16.253658, price: 33.32},
            {company: "KLA Corporation", ticker: "KLAC", industry: "Semiconductor Equipment & Materials", peg: 1.7493, trailPE: 34.137608, fwdPE: 28.572823, price: 937.76},
            {company: "Lucid Group, Inc.", ticker: "LCID", industry: "Auto Manufacturers", peg: null, trailPE: null, fwdPE: -3.2045455, price: 2.82},
            {company: "Logitech International S.A.", ticker: "LOGI", industry: "Computer Hardware", peg: 2.1303, trailPE: 23.026634, fwdPE: 20.277185, price: 95.1},
            {company: "Lam Research Corporation", ticker: "LRCX", industry: "Semiconductor Equipment & Materials", peg: 1.4936, trailPE: 28.339832, fwdPE: 23.826698, price: 101.74},
            {company: "lululemon athletica inc.", ticker: "LULU", industry: "Apparel Retail", peg: 0.9777, trailPE: 15.174031, fwdPE: 14.950436, price: 223.21},
            {company: "Microchip Technology Incorporated", ticker: "MCHP", industry: "Semiconductors", peg: null, trailPE: null, fwdPE: 28.403847, price: 73.85},
            {company: "Mondelez International, Inc.", ticker: "MDLZ", industry: "Confectioners", peg: 5.6842, trailPE: 25.80669, fwdPE: 20.239067, price: 69.42},
            {company: "MercadoLibre, Inc.", ticker: "MELI", industry: "Internet Retail", peg: 1.5639, trailPE: 58.669792, fwdPE: 49.174454, price: 2379.06},
            {company: "Meta Platforms, Inc.", ticker: "META", industry: "Internet Content & Information", peg: 2.3267, trailPE: 27.882872, fwdPE: 28.180437, price: 712.965},
            {company: "Monster Beverage Corporation", ticker: "MNST", industry: "Beverages - Non-Alcoholic", peg: 1.9238, trailPE: 39.098686, fwdPE: 31.780748, price: 59.43},
            {company: "Monolithic Power Systems, Inc.", ticker: "MPWR", industry: "Semiconductors", peg: 0.4061419117647059, trailPE: 19.332355, fwdPE: 42.186844, price: 724.77},
            {company: "Moderna, Inc.", ticker: "MRNA", industry: "Biotechnology", peg: null, trailPE: null, fwdPE: -3.55977, price: 30.97},
            {company: "Marvell Technology, Inc.", ticker: "MRVL", industry: "Semiconductors", peg: null, trailPE: null, fwdPE: 29.223999, price: 73.06},
            {company: "Microsoft Corporation", ticker: "MSFT", industry: "Software - Infrastructure", peg: 2.3859, trailPE: 39.35648, fwdPE: 34.117725, price: 510.06},
            {company: "Netflix, Inc.", ticker: "NFLX", industry: "Entertainment", peg: 2.2808, trailPE: 52.569057, fwdPE: 51.86165, price: 1233.27},
            {company: "ServiceNow, Inc.", ticker: "NOW", industry: "Software - Application", peg: 2.1428, trailPE: 131.13524, fwdPE: 57.479637, price: 959.91},
            {company: "NetEase, Inc.", ticker: "NTES", industry: "Electronic Gaming & Multimedia", peg: 2.26, trailPE: 19.62143, fwdPE: 18.26463, price: 137.35},
            {company: "NVIDIA Corporation", ticker: "NVDA", industry: "Semiconductors", peg: 1.6716, trailPE: 55.283875, fwdPE: 41.597088, price: 171.38},
            {company: "NXP Semiconductors N.V.", ticker: "NXPI", industry: "Semiconductors", peg: 1.5155, trailPE: 24.89313, fwdPE: 17.465189, price: 228.27},
            {company: "Old Dominion Freight Line, Inc.", ticker: "ODFL", industry: "Trucking", peg: 3.0649, trailPE: 30.62852, fwdPE: 27.66949, price: 163.25},
            {company: "Okta, Inc.", ticker: "OKTA", industry: "Software - Infrastructure", peg: 0.5046, trailPE: 147.47693, fwdPE: 33.055172, price: 95.86},
            {company: "Oracle Corporation", ticker: "ORCL", industry: "Software - Infrastructure", peg: 2.5608, trailPE: 56.115204, fwdPE: 34.013966, price: 243.54},
            {company: "Palo Alto Networks, Inc.", ticker: "PANW", industry: "Software - Infrastructure", peg: 2.4359, trailPE: 114.873566, fwdPE: 27.761112, price: 199.88},
            {company: "Paychex, Inc.", ticker: "PAYX", industry: "Software - Application", peg: 2.5428, trailPE: 31.148474, fwdPE: 26.967865, price: 142.66},
            {company: "PDD Holdings Inc.", ticker: "PDD", industry: "Internet Retail", peg: 1.3107, trailPE: 11.967846, fwdPE: 7.9247694, price: 111.66},
            {company: "PepsiCo, Inc.", ticker: "PEP", industry: "Beverages - Non-Alcoholic", peg: 3.2337, trailPE: 25.810566, fwdPE: 16.419466, price: 141.7},
            {company: "PayPal Holdings, Inc.", ticker: "PYPL", industry: "Credit Services", peg: 1.0024, trailPE: 16.813484, fwdPE: 15.300613, price: 74.82},
            {company: "QUALCOMM Incorporated", ticker: "QCOM", industry: "Semiconductors", peg: 2.2241, trailPE: 16.221428, fwdPE: 12.998365, price: 158.97},
            {company: "Regeneron Pharmaceuticals, Inc.", ticker: "REGN", industry: "Biotechnology", peg: 1.1474, trailPE: 13.870583, fwdPE: 12.0399475, price: 545.53},
            {company: "Rivian Automotive, Inc.", ticker: "RIVN", industry: "Auto Manufacturers", peg: null, trailPE: null, fwdPE: -5.0, price: 13.7},
            {company: "Roku, Inc.", ticker: "ROKU", industry: "Entertainment", peg: null, trailPE: null, fwdPE: -145.53969, price: 91.69},
            {company: "Starbucks Corporation", ticker: "SBUX", industry: "Restaurants", peg: 2.4802, trailPE: 33.694546, fwdPE: 24.908604, price: 92.66},
            {company: "Sirius XM Holdings Inc.", ticker: "SIRI", industry: "Entertainment", peg: null, trailPE: null, fwdPE: 7.5667753, price: 23.23},
            {company: "Synopsys, Inc.", ticker: "SNPS", industry: "Software - Infrastructure", peg: 12.0656, trailPE: 68.376884, fwdPE: 39.775387, price: 591.46},
            {company: "Atlassian Corporation", ticker: "TEAM", industry: "Software - Application", peg: 2.2871, trailPE: null, fwdPE: 47.289536, price: 194.36},
            {company: "T-Mobile US, Inc.", ticker: "TMUS", industry: "Telecom Services", peg: 1.0567, trailPE: 22.694633, fwdPE: 21.801311, price: 232.62},
            {company: "Tesla, Inc.", ticker: "TSLA", industry: "Auto Manufacturers", peg: 5.7652, trailPE: 187.70857, fwdPE: 101.385796, price: 328.49},
            {company: "Texas Instruments Incorporated", ticker: "TXN", industry: "Semiconductors", peg: 2.3006, trailPE: 40.56144, fwdPE: 36.491497, price: 214.57},
            {company: "Verisk Analytics, Inc.", ticker: "VRSK", industry: "Consulting Services", peg: 4.0553, trailPE: 44.11782, fwdPE: 41.091908, price: 299.56},
            {company: "Vertex Pharmaceuticals Incorporated", ticker: "VRTX", industry: "Biotechnology", peg: null, trailPE: null, fwdPE: 24.426744, price: 458.49},
            {company: "Walgreens Boots Alliance, Inc.", ticker: "WBA", industry: "Pharmaceutical Retailers", peg: null, trailPE: null, fwdPE: 7.836735, price: 11.52},
            {company: "Workday, Inc.", ticker: "WDAY", industry: "Software - Application", peg: 1.0231, trailPE: 130.56425, fwdPE: 28.157831, price: 233.71},
            {company: "Xcel Energy Inc.", ticker: "XEL", industry: "Utilities - Regulated Electric", peg: 2.8062, trailPE: 21.05, fwdPE: 18.686684, price: 71.57},
            {company: "Zoom Communications Inc.", ticker: "ZM", industry: "Software - Application", peg: 1.1960624064171124, trailPE: 22.366367, fwdPE: 14.079396, price: 74.48},
            {company: "Zscaler, Inc.", ticker: "ZS", industry: "Software - Infrastructure", peg: 3.8964, trailPE: null, fwdPE: 81.01966, price: 288.43},
        ];

        // =============================================
        // 유틸리티 함수들
        // =============================================
        class Utils {
            static formatNumber(value) {
                if (value === null || value === undefined) return "N/A";
                if (typeof value === 'number') {
                    return value.toLocaleString('en-US', {
                        minimumFractionDigits: 0,
                        maximumFractionDigits: 3
                    });
                }
                return value;
            }

            static formatPrice(price) {
                if (price === null || price === undefined) return "N/A";
                return `$${price.toLocaleString('en-US', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                })}`;
            }

            static getPegClass(peg) {
                if (peg === null || peg === undefined) return 'peg-na';
                if (peg < 1.0) return 'peg-excellent';
                if (peg <= 2.0) return 'peg-good';
                return 'peg-poor';
            }

            static debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }
        }

        // =============================================
        // 테이블 관리 클래스
        // =============================================
        class TableManager {
            static sortDirection = {};
            
            static init() {
                this.renderTable();
                this.sortTable(3); // PEG 컬럼으로 기본 정렬
            }

            static renderTable() {
                const tbody = document.getElementById('tableBody');
                tbody.innerHTML = '';

                STOCK_DATA.forEach(stock => {
                    const row = document.createElement('tr');
                    row.setAttribute('role', 'row');
                    
                    row.innerHTML = `
                        <td class="cell-company" role="gridcell">${stock.company}</td>
                        <td class="cell-ticker" role="gridcell">${stock.ticker}</td>
                        <td class="cell-industry" role="gridcell">${stock.industry}</td>
                        <td class="cell-peg ${Utils.getPegClass(stock.peg)}" role="gridcell">
                            ${Utils.formatNumber(stock.peg)}
                        </td>
                        <td class="cell-pe" role="gridcell">${Utils.formatNumber(stock.trailPE)}</td>
                        <td class="cell-pe" role="gridcell">${Utils.formatNumber(stock.fwdPE)}</td>
                        <td class="cell-price" role="gridcell">${Utils.formatPrice(stock.price)}</td>
                    `;
                    
                    tbody.appendChild(row);
                });
            }

            static sortTable(columnIndex) {
                const table = document.getElementById('stockTable');
                const tbody = table.getElementsByTagName('tbody')[0];
                const rows = Array.from(tbody.getElementsByTagName('tr'));
                const headers = table.getElementsByTagName('th');
                
                // 정렬 방향 토글
                const currentDirection = this.sortDirection[columnIndex] || 'asc';
                const newDirection = currentDirection === 'asc' ? 'desc' : 'asc';
                this.sortDirection[columnIndex] = newDirection;
                
                // 모든 헤더에서 정렬 클래스 제거
                Array.from(headers).forEach(header => {
                    header.classList.remove('sort-asc', 'sort-desc');
                    header.setAttribute('aria-sort', 'none');
                });
                
                // 현재 헤더에 정렬 클래스 추가
                headers[columnIndex].classList.add(`sort-${newDirection}`);
                headers[columnIndex].setAttribute('aria-sort', newDirection === 'asc' ? 'ascending' : 'descending');
                
                // 정렬 함수
                const getValue = (row) => {
                    const cellText = row.getElementsByTagName('td')[columnIndex].textContent.trim();
                    
                    // 숫자 컬럼 처리
                    if (columnIndex >= 3) {
                        const cleanText = cellText.replace(/[$,]/g, '');
                        if (cleanText === 'N/A') return newDirection === 'asc' ? Infinity : -Infinity;
                        return parseFloat(cleanText) || 0;
                    }
                    
                    return cellText;
                };
                
                // 행 정렬
                rows.sort((a, b) => {
                    const aValue = getValue(a);
                    const bValue = getValue(b);
                    
                    if (typeof aValue === 'number' && typeof bValue === 'number') {
                        return newDirection === 'asc' ? aValue - bValue : bValue - aValue;
                    }
                    
                    const result = String(aValue).localeCompare(String(bValue), 'ko');
                    return newDirection === 'asc' ? result : -result;
                });
                
                // 정렬된 행들을 테이블에 다시 추가
                rows.forEach(row => tbody.appendChild(row));
                
                // 접근성을 위한 정렬 완료 알림
                this.announceSort(columnIndex, newDirection);
            }

            static handleKeyPress(event, columnIndex) {
                if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault();
                    this.sortTable(columnIndex);
                }
            }

            static announceSort(columnIndex, direction) {
                const columnNames = ['Company', 'Ticker', 'Industry', 'PEG', 'Trail P/E', 'Fwd P/E', 'Price'];
                const directionText = direction === 'asc' ? '오름차순' : '내림차순';
                
                // 스크린 리더용 알림
                const announcement = document.createElement('div');
                announcement.setAttribute('aria-live', 'polite');
                announcement.setAttribute('aria-atomic', 'true');
                announcement.className = 'sr-only';
                announcement.textContent = `${columnNames[columnIndex]} 컬럼이 ${directionText}으로 정렬되었습니다.`;
                
                document.body.appendChild(announcement);
                setTimeout(() => document.body.removeChild(announcement), 1000);
            }
        }

        // =============================================
        // 앱 초기화
        // =============================================
        class App {
            static init() {
                // DOM 로드 완료 시 초기화
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', () => this.setup());
                } else {
                    this.setup();
                }
            }

            static setup() {
                // 테이블 초기화
                TableManager.init();
                
                // 성능 모니터링
                this.addPerformanceMonitoring();
                
                // 키보드 네비게이션 개선
                this.enhanceKeyboardNavigation();
                
                console.log('📊 NASDAQ 100 PEG Analysis Dashboard 초기화 완료');
            }

            static addPerformanceMonitoring() {
                // 페이지 로드 성능 측정
                window.addEventListener('load', () => {
                    if ('performance' in window) {
                        const perfData = window.performance.timing;
                        const loadTime = perfData.loadEventEnd - perfData.navigationStart;
                        console.log(`📈 페이지 로드 시간: ${loadTime}ms`);
                    }
                });
            }

            static enhanceKeyboardNavigation() {
                // 테이블 행 키보드 네비게이션
                const table = document.getElementById('stockTable');
                if (table) {
                    table.addEventListener('keydown', (e) => {
                        if (e.target.tagName === 'TH') {
                            this.handleTableHeaderNavigation(e);
                        }
                    });
                }
            }

            static handleTableHeaderNavigation(event) {
                const headers = Array.from(document.querySelectorAll('th[tabindex="0"]'));
                const currentIndex = headers.indexOf(event.target);
                
                let newIndex = currentIndex;
                
                switch (event.key) {
                    case 'ArrowLeft':
                        newIndex = Math.max(0, currentIndex - 1);
                        break;
                    case 'ArrowRight':
                        newIndex = Math.min(headers.length - 1, currentIndex + 1);
                        break;
                    case 'Home':
                        newIndex = 0;
                        break;
                    case 'End':
                        newIndex = headers.length - 1;
                        break;
                    default:
                        return;
                }
                
                if (newIndex !== currentIndex) {
                    event.preventDefault();
                    headers[newIndex].focus();
                }
            }
        }

        // =============================================
        // 글로벌 노출 (하위 호환성)
        // =============================================
        window.TableManager = TableManager;
        window.Utils = Utils;



        // =============================================
        // PWA 관리 시스템
        // =============================================
        class PWAManager {
            constructor() {
                this.installPrompt = null;
            }

            // PWA 초기화
            init() {
                this.registerServiceWorker();
                this.setupInstallPrompt();
            }

            // 서비스 워커 등록
            async registerServiceWorker() {
                if ('serviceWorker' in navigator) {
                    try {
                        const registration = await navigator.serviceWorker.register('sw.js');
                        console.log('✅ 서비스 워커가 성공적으로 등록되었습니다:', registration.scope);
                    } catch (error) {
                        console.error('❌ 서비스 워커 등록에 실패했습니다:', error);
                    }
                }
            }

            // 설치 프롬프트 설정
            setupInstallPrompt() {
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    this.installPrompt = e;
                    this.showInstallBanner(); // 설치 배너 표시
                });
            }

            // 설치 배너 표시
            showInstallBanner() {
                // 설치 배너를 표시하는 로직 (UI/UX에 맞게 구현)
                // 예: document.getElementById('install-banner').style.display = 'block';
            }

            // PWA 설치 실행
            async install() {
                if (!this.installPrompt) {
                    alert('이 브라우저에서는 자동 설치가 지원되지 않습니다.\\n수동으로 설치해주세요.');
                    return;
                }
                await this.installPrompt.prompt();
            }
        }

        // PWA Manager 인스턴스 생성 및 초기화
        const PWAManagerInstance = new PWAManager();
        PWAManagerInstance.init();

        // 기존 앱 초기화
        App.init();
    </script>
</body>
</html>
    
